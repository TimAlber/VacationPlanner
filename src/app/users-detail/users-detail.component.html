<div *ngIf="displayUserData">
  <table class="tabelle">
    <tr>
      <th>
        <h3>Name: {{ displayUserData.displayName }}</h3>
        <p>Email: {{ displayUserData.email }}</p>
        <p *ngIf="displayUserData.role === 'ADMIN'">Role: Supervisor</p>
        <p *ngIf="displayUserData.role === 'USER'">Role: Employee</p>
        <p *ngIf="displayUserData.partTime === true">This Employee is Part Time Worker</p>
        <p *ngIf="displayUserData.partTime === false">This Employee is Full Time Worker</p>
        <p>
          Your Vacation Entitlement: {{ displayUserData.vacdaystotal }} days
        </p>
        <p>Already taken holidays: {{ displayUserData.vacdaystaken }} days</p>
        <p>
          Holidays left:
          {{ displayUserData.vacdaystotal - displayUserData.vacdaystaken }} days
        </p>
      </th>
      <th>
        <app-user-donut-chart [User]="displayUserData"></app-user-donut-chart>
      </th>
      <th>
        <div *ngIf="displayUserData.role === 'USER'">
          <button mat-raised-button color="primary" (click)="makeemadmin()">
            Make this Employee an Supervisor
          </button>
        </div>
        <div *ngIf="displayUserData.role === 'ADMIN'">
          <button mat-raised-button color="primary" (click)="makeemuser()"
                  matTooltip="change the role">
            Make this Supervisor a Employee
          </button>
        </div>
        <br /><br />
        <button mat-stroked-button color="primary" (click)="openDialog()">
          Set Amount of Vacation Days per year.
        </button>
        <br><br>
        <div *ngIf="displayUserData.partTime === false">
          <button mat-stroked-button color="primary" (click)="makePart()">
            Make this Employee a Part Time Worker
          </button>
        </div>
        <div *ngIf="displayUserData.partTime === true">
          <button mat-stroked-button color="primary" (click)="makeFull()">
            Make this Employee a Full Time Worker
          </button>

        </div>
        <br><br>
      </th>
    </tr>

  </table>
  <p class = "infotext">Please check if the vacation entitlement of the Employee is entered correctly!</p>
</div>
<mat-accordion>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Pending Vacation Plans
      </mat-panel-title>
    </mat-expansion-panel-header>

    <table
      style="width: 100%"
      mat-table
      [dataSource]="pdataSource"
      class="mat-elevation-z8 pending"
    >
      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
      </ng-container>

      <ng-container matColumnDef="Von">
        <th mat-header-cell *matHeaderCellDef>From</th>
        <td mat-cell *matCellDef="let element">
          {{ element.von.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Bis">
        <th mat-header-cell *matHeaderCellDef>To</th>
        <td mat-cell *matCellDef="let element">
          {{ element.bis.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Length">
        <th mat-header-cell *matHeaderCellDef>Length</th>
        <td mat-cell *matCellDef="let element">{{ element.diffdays }} days</td>
      </ng-container>

      <ng-container matColumnDef="Description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let element">{{ element.description }}</td>
      </ng-container>

      <ng-container matColumnDef="Details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let element">
          <a routerLink="/vacation-detail" [state]="{ vid: element.id }"
            ><button mat-raised-button color="primary">Detail</button></a
          >
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-expansion-panel>
  <mat-expansion-panel
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        Approved Vacation Plans
      </mat-panel-title>
    </mat-expansion-panel-header>

    <table
      style="width: 100%"
      mat-table
      [dataSource]="adataSource"
      class="mat-elevation-z8 approved"
    >
      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
      </ng-container>

      <ng-container matColumnDef="Von">
        <th mat-header-cell *matHeaderCellDef>From</th>
        <td mat-cell *matCellDef="let element">
          {{ element.von.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Bis">
        <th mat-header-cell *matHeaderCellDef>To</th>
        <td mat-cell *matCellDef="let element">
          {{ element.bis.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Length">
        <th mat-header-cell *matHeaderCellDef>Length</th>
        <td mat-cell *matCellDef="let element">{{ element.diffdays }} days</td>
      </ng-container>

      <ng-container matColumnDef="Description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let element">{{ element.description }}</td>
      </ng-container>

      <ng-container matColumnDef="Details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let element">
          <a routerLink="/vacation-detail" [state]="{ vid: element.id }"
            ><button mat-raised-button color="primary">Detail</button></a
          >
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-expansion-panel>

  <mat-expansion-panel
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        Declined Vacation Plans
      </mat-panel-title>
    </mat-expansion-panel-header>

    <table
      style="width: 100%"
      mat-table
      [dataSource]="ddataSource"
      class="mat-elevation-z8 declined"
    >
      <ng-container matColumnDef="Name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
      </ng-container>

      <ng-container matColumnDef="Von">
        <th mat-header-cell *matHeaderCellDef>From</th>
        <td mat-cell *matCellDef="let element">
          {{ element.von.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Bis">
        <th mat-header-cell *matHeaderCellDef>To</th>
        <td mat-cell *matCellDef="let element">
          {{ element.bis.seconds * 1000 | date: "dd.MM.yyyy" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Length">
        <th mat-header-cell *matHeaderCellDef>Length</th>
        <td mat-cell *matCellDef="let element">{{ element.diffdays }} days</td>
      </ng-container>

      <ng-container matColumnDef="Description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let element">{{ element.description }}</td>
      </ng-container>

      <ng-container matColumnDef="Details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let element">
          <a routerLink="/vacation-detail" [state]="{ vid: element.id }"
            ><button mat-raised-button color="primary">Detail</button></a
          >
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-expansion-panel>
</mat-accordion>
